---
import Icon from "./Icon.astro";
import HoverZone from "./HoverZone.astro";
const { icon, chip, chipIcon, chipColor, href } = Astro.props;

const active = Astro.url.pathname.startsWith(href);
---

<li class:list={[{ active: active }]}>
  <a href={href}>
    <Icon icon={icon} class="icon" />
    <span class="navLinkText">
      <slot />
    </span>
    {
      chip && (
        <div class="navChips">
          <span class="navChip">
            {chip}
            {chipIcon && <Icon icon={chipIcon} class="icon" />}
          </span>
        </div>
      )
    }
    {active && <HoverZone />}
  </a>

  <style define:vars={{ chipColor: chipColor }}>
    li {
      list-style: none;
    }

    a {
      position: relative;
      display: flex;
      align-items: center;
      padding: 0 calc(var(--navPadding) * 2);
      font-size: 1em;
      border-radius: var(--borderRounding);
    }

    .navLinkText {
      flex: 1;
      padding: 0.6em 0;
    }
    .navChips {
      position: relative;
      margin-left: 1em;
    }
    .navChip {
      border-radius: 100px;
      padding: 0.3em 0.8em;
      font-size: 0.8em;
      display: flex;
      align-items: center;
      /* left: 1em; */
      transition: background-color 0.2s ease;
      z-index: 999999;
    }
    .navChip::after {
      content: "";
      position: absolute;
      background-color: rgba(0, 0, 0, 0.01);
      backdrop-filter: brightness(0.83) contrast(1.3) saturate(130%);
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      border-radius: 100px;
      z-index: 999999;
    }
    .icon {
      width: 1.2em !important;
      height: 1.2em !important;
      margin-right: 0.6em;
      filter: contrast(0.5) brightness(1000);
      opacity: 0.5;
      transition: opacity 0.2s ease;
    }
    .navChip .icon {
      margin: 0;
      margin-left: 0.4em;
      opacity: 1;
    }

    @media screen and (min-width: 801px) {
      a {
        border-bottom-right-radius: 0;
        border-top-right-radius: 0;
      }
      li {
        padding-right: 0;
      }
    }
  </style>
</li>
