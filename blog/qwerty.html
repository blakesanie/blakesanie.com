<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>Generating Optimal Keyboard Layouts with Node.js</title>
        <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
        <link rel="manifest" href="/favicons/site.webmanifest">
        <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="theme-color" content="#ffffff">
        <link rel="stylesheet" href="../base.css" type="text/css">
        <link rel="stylesheet" href="postStyle.css" type="text/css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.7.1/gist-embed.min.js"></script>
    </head>
    <body>
        <div id="header">
            <h1>Blake Sanie</h1>
            <h2>Student. Aspiring computer scientist. Photography enthusiast. Baseball fan. Optimist.</h2>
            <div id="menuIcon">
                <div class="line"></div>
                <div class="line"></div>
                <div class="line"></div>
            </div>
            <div id="nav">
                <a href="../"><h3>Home</h3></a>
                <a href="../about"><h3>About</h3></a>
                <h3 class="category">Computer Science</h3>
                <a href="../resume"><h3>Résumé</h3></a>
                <a href="../cs"><h3>Projects</h3></a><a href="../blog"><h3>Blog</h3></a>
                <a href="https://github.com/blakesanie" target="_blank"><h3>GitHub <sup>↗</sup></h3></a>
                <h3 class="category">Photography</h3>
                <a href="../photo"><h3>Portfolio</h3></a>
                <a href="../photo/gear"><h3>Gear</h3></a>
                <h3 class="category">Personal </h3>
                <a href="mailto:blake@sanie.com"><h3>Email <sup>↗</sup></h3></a>
                <a href="https://www.linkedin.com/in/blake-sanie-77733116a/" target="_blank"><h3>LinkedIn <sup>↗</sup></h3></a>
                <a href="https://www.instagram.com/blake_sanie/" target="_blank"><h3>Instagram <sup>↗</sup></h3></a>
                <a href="https://accounts.snapchat.com/accounts/snapcodes" target="_blank"><h3>Snapchat <sup>↗</sup></h3></a>
            </div>
            <h4>made by Blake Sanie with ♥</h4>
        </div>
        <div id="content">
            <h1>Generating Optimal Keyboard Layouts with Node.js</h1>
            <p id="date">Jul 4, 2018</p>
            <p>Today, the ubiquitous <a href="https://en.wikipedia.org/wiki/QWERTY" target="_blank">QWERTY</a> keyboard is assumed to be the optimal layout for typing in the English language. Since QWERTY was developed in the 1870's, I challenged myself to use modern computer science to generate a more optimal keyboard.</p>
            <h2>Prerequisites</h2>
            <ul>
                <li>Node.js</li>
                <li>Iteration/Selection</li>
            </ul>
            <h2>Strategy</h2>
            <ol>
                <li>Read and analyze text</li>
                <li>Use character-to-character trends to design layout</li>
                <li>Compare new keyboard to QWERTY via a typing simulation</li>
            </ol>
            <h2>Text Analysis</h2>
            <p>Our keyboard will be optimized to type a certain text, making key layouts adaptable to different styles of language. In this experiment, we will use Jane Austen's <a class='underline' href="https://en.wikipedia.org/wiki/Pride_and_Prejudice" target="_blank">Pride and Prejudice</a> as a txt file.</p>
            <code data-gist-id="2ec7d5502f681ed4365087eb57491aa6"  data-gist-line="1-7,13017-13021"></code>
            <p>Load in the txt file as a string, so that the text can be processed.</p>
            <code data-gist-id="c07d6e35b144d330eb2259c9753f37e9"  data-gist-line="1,4,6-18"></code>
            <p>Iterate through each character of the text string, tracking each character in a <a href="https://en.wikipedia.org/wiki/Markov_chain" target="_blank">Markov Chain</a> object. This object will contain each character it encounters, and will track the frequency of every character that follows it. These statistics are essential in identifying trends.</p>
            <code data-gist-id="c07d6e35b144d330eb2259c9753f37e9"  data-gist-line="3,19-37"></code>
            <p>Once the whole text is parsed, the markovChain object looks like this: (not all character data shown)</p>
            <code data-gist-id="51caba15297d8d9a2e56cf326efa69e1"  data-gist-line="1-5,28-30,658-659"></code>
            <p>Using this data, we populate an array with each subObject in markovChain. We then sort this array by each object's "freq" value. All attributes are removed from the array's objects, leaving only an array of letters in order of their frequency.</p>
            <code data-gist-id="c07d6e35b144d330eb2259c9753f37e9"  data-gist-line="39-53,141-144"></code>
            <p>Using the array returned by getMostUsed(), we can assign each letter to a row. The most frequent characters are found on the home (middle) row, with semi and low frequency characters on the upper and lower row, respectively.</p>
            <code data-gist-id="c07d6e35b144d330eb2259c9753f37e9"  data-gist-line="55-64,75"></code>
            <p>Once the characters in each row are defined, arrange them in a way such that finger travel distance is minized. In other words, find the sequence in which characters commonly used together are as close together as possible. The two following snippets will be used...</p>
            <code data-gist-id="c07d6e35b144d330eb2259c9753f37e9"  data-gist-line="72-85"></code>
            <p>Find all permutations for the characters in a row, recursively.</p>
            <code data-gist-id="c07d6e35b144d330eb2259c9753f37e9"  data-gist-line="128-140"></code>
            <p>Iterate through permutations, finding the permutation that minimizes space between consequtive characters. This is where the frequency of each letter following another letter (from the markovChain object) becomes handy. If you understand all this code, you have earned my respect.<p>
            <code data-gist-id="c07d6e35b144d330eb2259c9753f37e9"  data-gist-line="87-121"></code>
            <p>Finally, console.log() the sequence of keys we have defined.</p>
            <code data-gist-id="c07d6e35b144d330eb2259c9753f37e9"  data-gist-line="123-126"></code>
            <h3>Output:</h3>
            <code data-gist-id="92e69917066b13367ecd2ac9a5a9ab0c"></code>
            <h3 class="italics">This is our keyboard.</h3>
            <h3 class="center" id="keyboard">C W B M F G L D U Y</br>N H R O I S E T A</br>V Q J K X Z P</h3>
            <h2>Testing our Keyboard</h2>
            <p>Load in our keyboard and the QWERTY layout, as well as the finger required to press a key at that index (1 = left ring, 8 = right ring, no thumbs).</p>
            <code data-gist-id="31894e3a12042ff4f00293ee95c8c809" data-gist-line="5-15"></code>
            <p>Read in our sample text as a string, just as before</p>
            <code data-gist-id="31894e3a12042ff4f00293ee95c8c809" data-gist-line="1-3,16-26,37"></code>
            <p>As shown in the function above, each keyboard is assessed and given a score. getScore() is a simulation that retypes the sample text character by character, tracking the movement of each finger. Movements that alternate hands are given a score of 0.5, and movements with the same hand (more slow) are given a score of 1. Lower/faster is better.</p>
            <code data-gist-id="31894e3a12042ff4f00293ee95c8c809" data-gist-line="39-60"></code>
            <p>console.log() the result</p>
            <code data-gist-id="31894e3a12042ff4f00293ee95c8c809" data-gist-line="27-36"></code>
            <h3>Output:</h3>
            <h3 id="keyboard" class='center'>Me: 436200.5</br>QWERTY: 540294.5</br><span class="italics">124% efficiency</span></h3>
            <h2>Also</h2>
            <p>Since our keyboard layout is optimized for our sample text, a keyboard can be made for any style of language</br></br>Just for fun, I found a collection of Shakespeare's sonnets and plays, and used that txt file as our base text.</p>
            <code data-gist-id="dde3a2b7e698f52f389532b4b52bc254" data-gist-line="1-5,11149,21612-21617"></code>
            <p>This txt file goes all the way to 124,186 lines. That's lots to work with.</br></br>Lets regenerate our key layout and run it through our simulation</p>
            <h3>Output:</h3>
            <h3 id="keyboard" class='center'>Me: 1109799</br>QWERTY: 1347859.5</br><span class="italics">121% efficiency</span></h3>
            <p>Success! It's too bad no keyboard layout will ever overthrow the infamous QWERTY. At least we can say we tried...</p>
        </div>
        <div id="disqus_thread"></div>
        <script src="../main.js"></script>
        <script src="functions.js"></script>
    </body>
</html>
