<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>Catching Cheaters in AP Computer Science</title>
        <meta name="description" content="Using Python to scrape and diff Snap projects for the sake of academic integrity. In Collaboration with Daniel Montgomery and Cole Mediratta" />
        <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
        <link rel="manifest" href="/favicons/site.webmanifest">
        <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="theme-color" content="#ffffff">
        <link rel="stylesheet" href="../base.css" type="text/css">
        <link rel="stylesheet" href="postStyle.css" type="text/css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.7.1/gist-embed.min.js"></script>
    </head>
    <body>
        <div id="header">
            <h1>Blake Sanie</h1>
            <h2>Student. Aspiring computer scientist. Photography enthusiast. Baseball fan. Optimist.</h2>
            <div id="menuIcon">
                <div class="line"></div>
                <div class="line"></div>
                <div class="line"></div>
            </div>
            <div id="nav">
                <a href="../"><h3>Home</h3></a>
                <a href="../about"><h3>About</h3></a>
                <h3 class="category">Computer Science</h3>
                <a href="../resume"><h3>Résumé</h3></a>
                <a href="../cs"><h3>Projects</h3></a><a href="../blog"><h3>Blog</h3></a>
                <a href="https://github.com/blakesanie" target="_blank"><h3>GitHub <sup>↗</sup></h3></a>
                <h3 class="category">Photography</h3>
                <a href="../photo"><h3>Portfolio</h3></a>
                <a href="../photo/gear"><h3>Gear</h3></a>
                <h3 class="category">Personal </h3>
                <a href="mailto:blake@sanie.com"><h3>Email <sup>↗</sup></h3></a>
                <a href="https://www.linkedin.com/in/blake-sanie-77733116a/" target="_blank"><h3>LinkedIn <sup>↗</sup></h3></a>
                <a href="https://www.instagram.com/blake_sanie/" target="_blank"><h3>Instagram <sup>↗</sup></h3></a>
                <a href="https://accounts.snapchat.com/accounts/snapcodes" target="_blank"><h3>Snapchat <sup>↗</sup></h3></a>
            </div>
            <h4>made by Blake Sanie with ♥</h4>
        </div>
        <div id="content">
            <h1>Catching Cheaters in AP Computer Science</h1>
            <h2 class="center">In collaboration with <a target="_blank" href="https://github.com/dmontgrmry">Daniel Montgomery</a> and <a target="_blank" href="https://github.com/cmediratta">Cole Mediratta</a></h2>
            <p>At my high school, AP Computer Science Principals is rumorred to be the easiest AP class. As a TA for the class, I see why. Students easily share and plagarize code without being caught. In an effort to regulate academic integrety, we have written a program to determine the originality of every script turned in by the students.</br></br>The students write their projects using <a target="_blank" href="https://snap.berkeley.edu">Snap</a>, a drag-and-drop programming platform developed by UC Berkeley. Since these projects are hosted on the web, students can distribute their project URL's, allowing other students to copy this work. This cheating occurs on <span class="italics">weekly assignments</span> as well as <span class="italics">unit tests</span>.</p>
            <h2>Plan</h2>
            <ol>
                <li>Obtain list of project URL's (students, answer key, etc.)</li>
                <li>Scrape XML content (student script) from each URL</li>
                <li>Perform a <a href="https://en.wikipedia.org/wiki/Diff" target="_blank">diff</a> between all projects</li>
                <li>Flag students with a suspiciously low originality percentage</li>
            </ol>
            <h2>Preparing Files for Differencing</h2>
            <p>Create a folder containing the html files for all projects you wish to compare. These html files will redirect to the Snap project's webpage.</p>
            <p>As each file path is parsed, our we will scrape the file's html link and fetch the <a href="https://en.wikipedia.org/wiki/XML" target="_blank">XML</a> that contains the student's code and project metadata.</p>
            <code data-gist-id="71de8b83c56fb314ddb9adefd401406b"  data-gist-line="13-23"></code>
            <code data-gist-id="44b0796e87bf76c5c36a019f4bc0ba3f"  data-gist-line="12-22"></code>
            <p>Once we receive the response, we validate if the response is the XML we are looking for. If not, then the file will not participate in comparison.</p>
            <code data-gist-id="fd6d88c6599f234b4d83a1c10542c20c"  data-gist-line="8-18"></code>
            <p>Since each project's XML is extremely similar in format and schema, so comparing XML directly will yield very high similarity percentages. To compare only unique values (the project's code itself), we create a custom class that extracts certain information from the XML and generates a projct report. These reports, not the original XML, will be compared to eachother.</p>
            <code data-gist-id="d5670ffdfe48cf8feafb78699fedd11f"  data-gist-line="7-17"></code>
            <h2>The Diff Algorithm</h2>
            <p>It's time to compare every file against the others. We iterate from the top of the list down, comparing each file to the files below it. This way, no two files will be compared to each other twice. Here's the pseudo code:</p>
            <h4><span class="comment">// files numbered 0 to n</span></br>for i in 0 to n :</br><span class="tab">for j in i + 1 to n :</span></br><span class="tab"><span class="tab">compare files i and j</span></span></h4>
            <p>The diff algorithm computes the number of changes (additions and subtractions) needed to transform one report into anther. The ratio of unchanged to total values is outputted as a percentage of originality. Percentages near 100% signal likely plagarized code.</p>
            <code data-gist-id="08cd70601e4550a5929576728f804cfb"  data-gist-line="43-53"></code>
            <!--<p>The traditional diff algorithm counts the number of changes (additions and subtractions) needed to transform one file into another. Similarity percentage can be defined as the ratio of unchanged lines to total lines. However, much of the Snap XML is fixed (common structure and metadata), so all comparisions would yield high similarity percentages. To avoid this outcome, each project's unique features are extracted into individual <span class="italics">classes</span>. Then, these <span class="italics">classes</span> are fed to python's <a href="https://docs.python.org/2/library/difflib.html" target="_blank">difflib</a> algorithm.</p>-->
            <p>To find the potential culprits, we sort all comparisons by similarity percentage and output to the computer's terminal.</p>
            <code data-gist-id="16eb40dd9148171cc373ec0f382a07cd"  data-gist-line="77-84"></code>

            <!--<h2>Output</h2>
            <p>$ ./codediff canvas_files/</p>
            <code data-gist-id="a844b36d1b32ec070b883821ecc25231"  data-gist-line="1-5,4301-4306"></code>-->
            <h2>Running the Program</h2>
            <p>Using the executable ./codediff, we can parse and compare the projects in the canvas_files directory</p>
            <img src="./images/terminalOutput.gif"/>
            <p>Looks like the class has to do their own work, now. Cheaters never win!</p>
            <h2>Use for Yourself</h2>
            <p>Follow the instructions on <a href="https://github.com/dmontgrmry/codediff" target="_blank">Daniel Montgomery's Github Repository</a>.</p>
            <div id="disqus_thread"></div>
            <!-- GIST ID's
            Snap report: <script src="https://gist.github.com/blakesanie/d5670ffdfe48cf8feafb78699fedd11f.js"></script>
            Validators: <script src="https://gist.github.com/blakesanie/fd6d88c6599f234b4d83a1c10542c20c.js"></script>
            utils: <script src="https://gist.github.com/blakesanie/16eb40dd9148171cc373ec0f382a07cd.js"></script>
            scraper: <script src="https://gist.github.com/blakesanie/44b0796e87bf76c5c36a019f4bc0ba3f.js"></script>
            parser: <script src="https://gist.github.com/blakesanie/71de8b83c56fb314ddb9adefd401406b.js"></script>
            matcher: <script src="https://gist.github.com/blakesanie/08cd70601e4550a5929576728f804cfb.js"></script>
            -->
        </div>
        <script>
        var disqus_config = function () {
        this.page.url = "http://www.blakesanie.com/blog/cheating.html";
        this.page.identifier = "cheating";
        };
        (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://blakesanie-com.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <script src="../main.js"></script>
        <script src="functions.js"></script>
    </body>
</html>
